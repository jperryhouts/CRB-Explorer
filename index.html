<!DOCTYPE HTML>
<html>
  <head>
    <meta charset="UTF-8">
    <title>CRB Explorer</title>
    <style>
      body {
        /* background-color:grey;
        color:white; */
        height:100vh;
        margin:0px;
        padding:0px;
      }
      #map-div, #map-background {
        display:block;
        position:relative;
        width:625px;
        height:500px;
      }
      #map-div>canvas, #map-div>img, #map-background>canvas {
        position:absolute;
        top:0px;
        left:0px;
      }
      #xsection-div {
        display:block;
        position:relative;
        background-color: #ddd/*rgba(191,216,204,255)*/;
        border:1px solid black;
        width:900px;
        height:300px;
        margin:2em auto;
      }
      #xsection-div>canvas {
        position:absolute;
        top:0px;
        left:0px;
      }
      #legend {
        border:1px solid black;
        position:absolute;
        top:0px;
        left:650px;
        width:220px;
        height:470px;
        padding:15px;
      }
    </style>
    <script src="visualizer.js?v=7" defer></script>
  </head>
  <body>
    <div style='padding:25px;width:900px;margin:0px auto;'>
      <div id='map-div'>
        <!-- Basemap exported from https://www.openstreetmap.org/export#map=7/46.054/-120.004&layers=C -->
        <img src='basemap-124.5,43.5,-115.5,48.5.png' width="625px" height="500px"/>
        <div id="map-background" width="625px" height="500px">
        </div>
        <canvas id="map-overlay" width="625px" height="500px" style='border:1px solid black;'>
          Your browser does not support HTML5.
        </canvas>
        <div id='legend'>
          <div id='legend-title' style='cursor:pointer;font-family:monospace;font-size:x-large;font-weight:bold;'>- Legend</div>
          <div id='swatches' style='display:block;padding-top:0.5em;padding-left:1em;'></div>
          <div id='instructions-title' style='cursor:pointer;font-family:monospace;font-size:x-large;font-weight:bold;margin-top:0.5em;'>+ Instructions</div>
          <div id='instructions' style='display:none;padding-top:0.5em;'>
<div style='font-weight:bold;font-family:sans-serif;width=100%;text-align:left;font-size:small;border:0.5px solid gray;padding:1em;margin:0px;'>
Map element
<pre> Mouse clicks:
  * L: Drag A *or* B
  * R: Drag both A *and* B

 Arrow keys:
  * U/D: Translate fwd/back
  * L/R: Rotate view L/R
  * Shift+U/D: Tilt up/down
  * Shift+L/R: Translate L/R
 z/Shift-Z: Adjust x-section
            thickness</pre></div>

<div style='font-weight:bold;font-family:sans-serif;width=100%;text-align:left;font-size:small;border:0.5px solid gray;padding:1em;margin:0.5em 0px 0px 0px;'>
Cross-section Element:
<pre> Mouse clicks:
  * Left/Right: Move ruler
    (same as A/B points above)
  * Middle: Pan view up/down
  * Scroll: Change scaling

 Space: Reset pitch & scale</pre></div>
          </div>
          <div id='credits-title' style='cursor:pointer;font-family:monospace;font-size:x-large;font-weight:bold;margin-top:0.5em;'>+ Credits</div>
          <div id='credits' style='display:none;font-size:x-small;'>
            <div style='margin-top:1em;'>
              Digitization by Philip Schoettle-Greene, Gene Humphreys,
              Jonathan Perry-Houts, Daniel O'Hara, Ana Mercedes Col&oacute;n, and
              Nate Klema.
            </div>

            <div style='margin-top:1em;font-weight:bold;display:block;'>Sources</div>

            <div style="margin-top:0.5em;display:block;">
              Base map image generated by
              <a href="https://www.openstreetmap.org/export#map=7/46.054/-120.004&layers=C">
                Open Street Map</a>.
            </div>

            <div style="margin-top:1em;display:block;">
              USGS:
                <div style="padding-left: 1em;text-decoration:underline;cursor:default;"
                    title='D.A. Swanson, T.L. Wright, V.E. Camp, J.N. Gardner, R.T. Helz, S.M. Price, S.P. Riedel, M.E. Ross. "Reconnaissance Geologic Map of the Columnbia River Basalt Group, Pullman and Walla Walla Quadrangles, Southeast Washington and Adjacent Idaho". 1980. USGS.'>
                  Swanson et. al. 1980;
                </div>
                <div style="padding-left: 1em;text-decoration:underline;cursor:default;"
                  title='D.A. Swanson, J.L. Anderson, V.E. Camp, P.R. Hooper, W.H. Taubeneck, T.L. Wright. "Reconnaissance map of the Columbia River Basalt Group, Northern Oregon and Western Idaho: [Baker, The Dalles, Elk City, Grangeville, and Pendleton quadrangles]". 1981. USGS.'>
                  Swanson et. al., 1981.
                </div>

              Idaho Geologic Survey:
                <div style='padding-left: 1em;cursor:default;'>
                  <span style='text-decoration:underline;'>GM-18</span>;
                  <span style='text-decoration:underline;'>GM-40</span>;
                  <span style='text-decoration:underline;'>DWM-92</span>;
                  <span style='text-decoration:underline;'>GM-29</span>;
                  <span style='text-decoration:underline;'>DWM-80</span>;
                  <span style='text-decoration:underline;'>DWM-94</span>;
                  <span style='text-decoration:underline;'>DWM-181</span>.
                </div>
            </div>

            <div style="margin-top:1em;display:block;">
              This project's source code is available through its
              <a href="https://github.com/jperryhouts/CRB-Explorer">GitHub</a>
              repository.
            </div>

            <div style="margin-top:1em;display:block;">
              <a rel="license" href="http://creativecommons.org/licenses/by/4.0/">
                <img alt="Creative Commons License" style="border-width:0"
                src="https://i.creativecommons.org/l/by/4.0/88x31.png" /></a><br/>
              This work is licensed under a
              <a rel="license" href="http://creativecommons.org/licenses/by/4.0/">
                Creative Commons Attribution 4.0 International License</a>.
            </div>
          </div>
        </div>
      </div>

    <script>
        const showHideInstructions = (show) => {
            const f = document.getElementById('instructions-title');
            const g = document.getElementById('instructions');
            g.style.display = show ? 'block' : 'none';
            f.textContent = show ? '- Instructions' : '+ Instructions';
            //f.style.cursor = show ? 'default' : 'pointer';
        };
        const showHideLegend = (show) => {
            const f = document.getElementById('legend-title');
            const g = document.getElementById('swatches');
            g.style.display = show ? 'block' : 'none';
            f.textContent = show ? '- Legend' : '+ Legend';
            //f.style.cursor = show ? 'default' : 'pointer';
        };
        const showHideCredits = (show) => {
            const f = document.getElementById('credits-title');
            const g = document.getElementById('credits');
            g.style.display = show ? 'block' : 'none';
            f.textContent = show ? '- Credits' : '+ Credits';
            //f.style.cursor = show ? 'default' : 'pointer';
        };
        document.getElementById('instructions-title').addEventListener('click', (e) => {
            const isHidden = document.getElementById('instructions').style.display === 'none';
            if (isHidden) {
              showHideInstructions(true);
              showHideLegend(false);
              showHideCredits(false);
            } else {
              showHideInstructions(false);
            }
        });
        document.getElementById('legend-title').addEventListener('click', (e) => {
            const isHidden = document.getElementById('swatches').style.display === 'none';
            if (isHidden) {
              showHideLegend(true);
              showHideInstructions(false);
              showHideCredits(false);
            } else {
              showHideLegend(false);
            }
        });
        document.getElementById('credits-title').addEventListener('click', (e) => {
            const isHidden = document.getElementById('credits').style.display === 'none';
            if (isHidden) {
              showHideCredits(true);
              showHideLegend(false);
              showHideInstructions(false);
            } else {
              showHideCredits(false);
            }
        });
    </script>

      <div id="xsection-div">
        <canvas id="xsection" width="900px" height="300px"></canvas>
        <canvas id="xsection-overlay" width="900px" height="300px"></canvas>
        <div style='display:block;position:absolute;top:300px;'>
          A: <span id='Alabel'></span> |
          B: <span id='Blabel'></span> |
          Length: <span id="ABLengthLabel"></span> km |
          Thickness: <span id='ThicknessLabel'></span> km |
          Pitch: <span id='PitchLabel'></span> &#176; |
          <span id="ruler-info">
            Ruler: <span id='RulerLabel'></span> km
          </ruler>
        </div>
      </div>
    </div>
    </svg>

  </body>
</html>
